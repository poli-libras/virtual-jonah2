function load_model_json(a,b){function c(a){var c=new THREE.SkinnedMesh(a,new THREE.MeshLambertMaterial);c.material.skinning=!0,b(c)}var d=new THREE.JSONLoader;d.load(a,c)}this.vj2=this.vj2||{},function(){"use strict";function a(a){this.human_model=a}var b=a.prototype;b.create_upper_limbs=function(){var a=this.create_arm_bones(26,27,28,"LEFT"),b=this.create_arm_bones(52,53,54,"RIGHT"),c=this.create_hand_left(),d=this.create_hand_right();this.upper_limbs_left=new vj2.Upper_limbs(c,a,"LEFT"),this.upper_limbs_right=new vj2.Upper_limbs(d,b,"RIGHT")},b.update_left=function(a,b,c,d){this.upper_limbs_left.update(a,b,c,d)},b.update_right=function(a,b,c,d){this.upper_limbs_right.update(a,b,c,d)},b.update_both=function(a,b,c,d){this.upper_limbs_right.update(a,b,c,d),this.upper_limbs_left.update(a,b,c,d)},b.update_wrist=function(a,b,c){this.upper_limbs_right.update_wrist(a,b,c),this.upper_limbs_left.update_wrist(a,b,c)},b.set_shape=function(a){this.upper_limbs_right.set_shape(a),this.upper_limbs_left.set_shape(a)},b.animation=function(){this.upper_limbs_right.animation(),this.upper_limbs_left.animation()},b.create_arm_bones=function(a,b,c,d){var e=this.human_model.bones[a].rotation,f=this.human_model.bones[b].rotation,g=this.human_model.bones[c].rotation;return new vj2.Arm_bones(e,f,g,d)},b.create_hand_left=function(){var a=this.create_finger(48,49,50,"LEFT"),b=this.create_finger(31,32,33,"LEFT"),c=this.create_finger(35,36,37,"LEFT"),d=this.create_finger(40,41,42,"LEFT"),e=this.create_finger(44,45,46,"LEFT");return new vj2.Hand(a,b,c,d,e,"LEFT")},b.create_hand_right=function(){var a=this.create_finger(74,75,76,"RIGHT"),b=this.create_finger(57,58,59,"RIGHT"),c=this.create_finger(61,62,63,"RIGHT"),d=this.create_finger(66,67,68,"RIGHT"),e=this.create_finger(70,71,72,"RIGHT");return new vj2.Hand(a,b,c,d,e,"RIGHT")},b.create_finger=function(a,b,c,d){var e=this.human_model.bones[a].rotation,f=this.human_model.bones[b].rotation,g=this.human_model.bones[c].rotation;return new vj2.Finger(e,f,g,d)},vj2.Action_upper_limbs=a}(),this.vj2=this.vj2||{},function(){"use strict";function a(a,b){this.list_bones=a,this.animation_time=b,this.time_now=b}a.prototype.animation=function(){var a=this.time_now/this.animation_time;this.map_animation(a),this.run_time(a)},a.prototype.map_animation=function(a){this.list_bones.forEach(function(b){b.animation(a)})},a.prototype.run_time=function(a){a>0?this.time_now-=1:this.reset_time()},a.prototype.reset_time=function(){this.time_now=this.animation_time},vj2.Animation_bones=a}(),this.vj2=this.vj2||{},function(){"use strict";function a(a,b,c,d){this.up_arm=new vj2.Bone(a),this.lo_arm=new vj2.Bone(b),this.wrist=new vj2.Bone(c),this.direction=d,this.loc=null,this.json_arm_left_pose={ESPACO_NEUTRO:{up:{x:-1.333,y:-1.333,z:-1.333},lo:{x:0,y:-.1333,z:0},wrist:{x:0,y:0,z:1.33}},ORELHA:{up:{x:-1.33,y:0,z:0},lo:{x:0,y:-2,z:0},wrist:{x:0,y:0,z:0}}},this.json_arm_right_pose={ESPACO_NEUTRO:{up:{x:1.333,y:1.333,z:-1.333},lo:{x:0,y:.1333,z:0},wrist:{x:0,y:0,z:-1.33}},ORELHA:{up:{x:-1.33,y:0,z:0},lo:{x:0,y:2,z:0},wrist:{x:0,y:0,z:0}}},this.animation_bones=new vj2.Animation_bones([this.up_arm,this.lo_arm,this.wrist],40)}a.prototype.animation=function(){this.animation_bones.animation()},a.prototype.update_pose=function(a,b,c,d){this.update_loc(d),this.update_wrist(a,b,c)},a.prototype.update_wrist=function(a,b,c){var d,e,f=c;"ORELHA"==this.loc?(d=a,e=b):(e=a,d=-b),"RIGHT"==this.direction?this.wrist.update_rotation(-d,e,-f):"LEFT"==this.direction&&this.wrist.update_rotation(d,e,f),this.animation_bones.reset_time()},a.prototype.update_loc=function(a){this.loc=a;var b;"RIGHT"==this.direction?b=this.json_arm_right_pose[this.loc]:"LEFT"==this.direction&&(b=this.json_arm_left_pose[this.loc]),this.update_arm(b.up,b.lo,b.wrist),this.animation_bones.reset_time()},a.prototype.update_arm=function(a,b,c){this.up_arm.set_rotation(a.x,a.y,a.z),this.lo_arm.set_rotation(b.x,b.y,b.z),this.wrist.set_rotation(c.x,c.y,c.z)},vj2.Arm_bones=a}(),this.vj2=this.vj2||{},function(){"use strict";function a(a){this.rotation=a,this.rotation_next=this.clone_rotation(a),this.rotation_prev=this.clone_rotation(a)}a.prototype.clone_rotation=function(a){var b=new THREE.Euler(0,0,0,"XYZ"),c=(new THREE.Quaternion).setFromEuler(a);return b.copy(a),b._quaternion=c,b._quaternion._euler=b,b},a.prototype.update_rotation=function(a,b,c){this.rotation_next.x+=a,this.rotation_next.y+=b,this.rotation_next.z+=c},a.prototype.set_rotation=function(a,b,c){this.rotation_next.x=a,this.rotation_next.y=b,this.rotation_next.z=c},a.prototype.animation=function(a){THREE.Quaternion.slerp(this.rotation_next._quaternion,this.rotation_prev._quaternion,this.rotation._quaternion,a),0===a&&this.update_rotation_prev()},a.prototype.update_rotation_prev=function(){this.rotation_prev=this.clone_rotation(this.rotation_next)},vj2.Bone=a}(),this.vj2=this.vj2||{},function(){"use strict";function a(a,b,c,d){this.phalange1=new vj2.Bone(a),this.phalange2=new vj2.Bone(b),this.phalange3=new vj2.Bone(c),this.phalange_list=[this.phalange1,this.phalange2,this.phalange3],this.direction=d}var b=a.prototype;b.close=function(a,b){var c=b,d=a;"RIGHT"==this.direction&&(d*=-1,c*=-1),this.phalange1.set_rotation(0,d,c),this.phalange2.set_rotation(0,0,c),this.phalange3.set_rotation(0,0,c)},b.open=function(){this.phalange_list.forEach(function(a){a.set_rotation(0,0,0)})},b.animation=function(a){this.phalange_list.forEach(function(b){b.animation(a)})},vj2.Finger=a}(),this.vj2=this.vj2||{},function(){"use strict";function a(a,b,c,d,e,f){this.thumb=a,this.index=b,this.middle=c,this.ring=d,this.pinky=e,this.direction=f,this.list_fingers=[this.thumb,this.index,this.middle,this.ring,this.pinky],this.animation_bones=new vj2.Animation_bones(this.list_fingers,40)}var b=a.prototype;b.open=function(){this.list_fingers.forEach(function(a){a.open()})},b.close=function(){this.index.close(.1,0),this.middle.close(0,0),this.ring.close(-.1,0),this.pinky.close(-.2,0)},b.rock=function(){var a=-1.256;this.index.close(.1,a),this.middle.close(0,a),this.ring.close(-.1,a),this.pinky.close(-.2,a)},b.animation=function(){this.animation_bones.animation()},b.set_shape=function(a){switch(a){case"MAO_FECHADA":this.close();break;case"MAO_ABERTA":this.open();break;case"PEDRA":this.rock()}this.animation_bones.reset_time()},vj2.Hand=a}(),this.vj2=this.vj2||{},function(){"use strict";function a(a,b,c){this.arm_bones=b,this.hand=a,this.direction=c}a.prototype.set_shape=function(a){this.hand.set_shape(a)},a.prototype.update=function(a,b,c,d){this.arm_bones.update_loc(d),this.arm_bones.update_wrist(a,b,c)},a.prototype.update_wrist=function(a,b,c){this.arm_bones.update_wrist(a,b,c)},a.prototype.animation=function(){this.arm_bones.animation(),this.hand.animation()},vj2.Upper_limbs=a}();