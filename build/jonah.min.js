function Action_upper_limbs(a){this.human_model=a}function load_model_json(a,b){function c(a){var c=new THREE.SkinnedMesh(a,new THREE.MeshLambertMaterial);c.material.skinning=!0,b(c)}var d=new THREE.JSONLoader;d.load(a,c)}function Upper_limbs(a,b,c){this.shape=a,this.arm_bones=b,this.direction=c}function Arm_bones(a,b,c,d){this.up_arm=a,this.up_arm_next=this.clone_bones(this.up_arm),this.up_arm_prev=this.clone_bones(this.up_arm),this.lo_arm=b,this.lo_arm_next=this.clone_bones(this.lo_arm),this.lo_arm_prev=this.clone_bones(this.lo_arm),this.wrist=c,this.wrist_next=this.clone_bones(this.wrist),this.wrist_prev=this.clone_bones(this.wrist),this.direction=d,this.json_arm_left_pose={ESPACO_NEUTRO:{up:{x:-1.333,y:-1.333,z:-1.333},lo:{x:0,y:-.1333,z:0},wrist:{x:0,y:0,z:1.33}},ORELHA:{up:{x:-1.33,y:0,z:0},lo:{x:0,y:-2,z:0},wrist:{x:0,y:0,z:0}}},this.json_arm_right_pose={ESPACO_NEUTRO:{up:{x:1.333,y:1.333,z:-1.333},lo:{x:0,y:.1333,z:0},wrist:{x:0,y:0,z:-1.33}},ORELHA:{up:{x:-1.33,y:0,z:0},lo:{x:0,y:2,z:0},wrist:{x:0,y:0,z:0}}},this.animation_time=400,this.animation_time_now=this.animation_time}Action_upper_limbs.prototype.create_arm_bones_from_model=function(a,b,c,d){var e=this.human_model.bones[a].rotation,f=this.human_model.bones[b].rotation,g=this.human_model.bones[c].rotation;return new Arm_bones(e,f,g,d)},Action_upper_limbs.prototype.create_upper_limbs=function(){var a=this.create_arm_bones_from_model(26,27,28,"LEFT"),b=this.create_arm_bones_from_model(52,53,54,"RIGHT");this.upper_limbs_left=new Upper_limbs("MAO_5",a,"LEFT"),this.upper_limbs_right=new Upper_limbs("MAO_5",b,"RIGHT")},Action_upper_limbs.prototype.update_left=function(a,b,c,d){this.upper_limbs_left.update(a,b,c,d)},Action_upper_limbs.prototype.update_right=function(a,b,c,d){this.upper_limbs_right.update(a,b,c,d)},Action_upper_limbs.prototype.update_both=function(a,b,c,d){this.upper_limbs_right.update(a,b,c,d),this.upper_limbs_left.update(a,b,c,d)},Action_upper_limbs.prototype.animation=function(){this.upper_limbs_right.animation(),this.upper_limbs_left.animation()},Upper_limbs.prototype.update=function(a,b,c,d){this.arm_bones.update_pose(a,b,c,d)},Upper_limbs.prototype.animation=function(){this.arm_bones.animation()},Arm_bones.prototype.animation=function(){var a=this.animation_time_now/this.animation_time;this.animation_bones(this.lo_arm,this.lo_arm_next,this.lo_arm_prev,a),this.animation_bones(this.wrist,this.wrist_next,this.wrist_prev,a),this.animation_bones(this.up_arm,this.up_arm_next,this.up_arm_prev,a),0===a?(this.animation_time_now=this.animation_time,this.animation_end()):this.animation_time_now-=1},Arm_bones.prototype.animation_bones=function(a,b,c,d){THREE.Quaternion.slerp(b._quaternion,c._quaternion,a._quaternion,d)},Arm_bones.prototype.clone_bones=function(a){var b=new THREE.Euler(0,0,0,"XYZ"),c=(new THREE.Quaternion).setFromEuler(a);return b.copy(a),b._quaternion=c,b._quaternion._euler=b,b},Arm_bones.prototype.animation_end=function(){this.wrist_prev=this.clone_bones(this.wrist_next),this.lo_arm_prev=this.clone_bones(this.lo_arm_next),this.up_arm_prev=this.clone_bones(this.up_arm_next)},Arm_bones.prototype.animation_reset_time=function(){this.animation_time_now=this.animation_time},Arm_bones.prototype.update_pose=function(a,b,c,d){this.update_loc(d),this.update_wrist(a,b,c),this.animation_reset_time()},Arm_bones.prototype.update_wrist=function(a,b,c){this.wrist_next.x+=a,this.wrist_next.y+=b,"RIGHT"==this.direction?this.wrist_next.z-=c:"LEFT"==this.direction&&(this.wrist_next.z+=c)},Arm_bones.prototype.update_loc=function(a){var b;"RIGHT"==this.direction?b=this.json_arm_right_pose[a]:"LEFT"==this.direction&&(b=this.json_arm_left_pose[a]),this.update_arm(b.up,b.lo,b.wrist)},Arm_bones.prototype.update_arm=function(a,b,c){this.up_arm_next.x=a.x,this.lo_arm_next.x=b.x,this.wrist_next.x=c.x,this.up_arm_next.y=a.y,this.lo_arm_next.y=b.y,this.wrist_next.y=c.y,this.up_arm_next.z=a.z,this.lo_arm_next.z=b.z,this.wrist_next.z=c.z};